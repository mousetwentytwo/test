(function($){$.fn.checkAll=function(group,options){var opts=$.extend({},$.fn.checkAll.defaults,options),$master=this,$slaves=$(group),selector,groupSize,onClick=typeof opts.onClick==="function"?opts.onClick:null,onMasterClick=typeof opts.onMasterClick==="function"?opts.onMasterClick:null,reportTo=typeof opts.reportTo==="function"?$.proxy(opts.reportTo,$master):null,propFn=typeof $.fn.prop==="function"?"prop":"attr",onFn=typeof $.fn.on==="function"?"on":"live",offFn=typeof $.fn.off==="function"?"off":"die";if($slaves.index($master)===-1){selector=$slaves.selector}else{$slaves=$slaves.not($master.selector);selector=$slaves.selector.replace(".not(",":not(")}groupSize=$slaves.length;if(groupSize===0){groupSize=-1}function _countChecked(){return $slaves.filter(":checked").length}function _autoEnable(){var numChecked=_countChecked();$master[propFn]("checked",groupSize===numChecked);if(reportTo){reportTo(numChecked)}}function _autoDisable(){$master[propFn]("checked",false);if(reportTo){reportTo(_countChecked())}}$master.unbind("click.checkAll").bind("click.checkAll",function(e){var check_val=e.target.checked;$slaves.add($master)[propFn]("checked",check_val);if(onMasterClick){onMasterClick.apply(this)}if(reportTo){reportTo(check_val?_countChecked():0)}});if(opts.sync){$(selector)[offFn]("click.checkAll")[onFn]("click.checkAll",function(){this.checked?_autoEnable():_autoDisable();if(onClick){onClick.apply(this)}})}_autoEnable();return this};$.fn.checkAll.defaults={sync:true}})(jQuery);